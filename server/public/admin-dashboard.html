<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Assixx</title>
    <link rel="stylesheet" href="/css/dashboard-theme.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <a href="/admin-dashboard" class="logo-container">
            <img src="/images/logo.png" alt="Assixx Logo" class="logo">
            <span class="logo-text">Assixx</span>
        </a>
        <div class="header-actions">
            <span id="user-info" class="text-secondary">Admin</span>
            <button id="logout-btn" class="btn btn-secondary">Ausloggen</button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <h1 class="text-center mb-4">Admin Dashboard</h1>
        
        <!-- Dashboard Stats Grid -->
        <div class="dashboard-grid">
            <div class="stat-card">
                <div class="stat-value" id="employee-count">0</div>
                <div class="stat-label">Mitarbeiter</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="document-count">0</div>
                <div class="stat-label">Dokumente</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="department-count">0</div>
                <div class="stat-label">Abteilungen</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="team-count">0</div>
                <div class="stat-label">Teams</div>
            </div>
        </div>

        <!-- Employee Creation Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Neuen Mitarbeiter erstellen</h2>
            </div>
            <form id="create-employee-form">
                <div class="form-group">
                    <label class="form-label">Benutzername</label>
                    <input type="text" name="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">E-Mail</label>
                    <input type="email" name="email" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Passwort</label>
                    <input type="password" name="password" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Vorname</label>
                    <input type="text" name="first_name" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Nachname</label>
                    <input type="text" name="last_name" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Mitarbeiter-ID</label>
                    <input type="text" name="employee_id" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Position</label>
                    <input type="text" name="position" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Telefon</label>
                    <input type="tel" name="phone" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">IBAN</label>
                    <input type="text" name="iban" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Firma</label>
                    <input type="text" name="company" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Notizen</label>
                    <textarea name="notes" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Mitarbeiter erstellen</button>
            </form>
        </div>

        <!-- Employee List Card -->
        <div class="card">
            <div class="card-header">
                <div class="flex flex-between">
                    <h2 class="card-title">Mitarbeiter-Übersicht</h2>
                    <div class="btn-group">
                        <button id="search-btn" class="btn btn-secondary">Suchen</button>
                        <button id="refresh-btn" class="btn btn-secondary">Aktualisieren</button>
                    </div>
                </div>
            </div>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Benutzername</th>
                            <th>Name</th>
                            <th>E-Mail</th>
                            <th>Position</th>
                            <th>Firma</th>
                            <th>Aktionen</th>
                        </tr>
                    </thead>
                    <tbody id="employee-table-body">
                        <!-- Wird dynamisch gefüllt -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Document Upload Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Dokument hochladen</h2>
            </div>
            <form id="document-upload-form" enctype="multipart/form-data">
                <div class="form-group">
                    <label class="form-label">Mitarbeiter auswählen</label>
                    <select name="employeeId" id="upload-employee-select" class="form-control" required>
                        <option value="">Bitte wählen...</option>
                        <!-- Wird dynamisch gefüllt -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Dokumenttyp</label>
                    <select name="category" class="form-control">
                        <option value="payslip">Lohnabrechnung</option>
                        <option value="contract">Vertrag</option>
                        <option value="certificate">Bescheinigung</option>
                        <option value="other">Sonstiges</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Datei auswählen</label>
                    <input type="file" name="file" class="form-control" accept="application/pdf" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Beschreibung</label>
                    <textarea name="description" class="form-control" rows="2"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Dokument hochladen</button>
            </form>
        </div>

        <!-- Departments and Teams Card -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">Abteilungen und Teams</h2>
            </div>
            <div class="dashboard-grid">
                <div class="stat-card">
                    <h3>Abteilungen</h3>
                    <div id="department-list" class="mt-3">
                        <!-- Wird dynamisch gefüllt -->
                    </div>
                    <button class="btn btn-primary mt-3" onclick="showDepartmentModal()">Neue Abteilung</button>
                </div>
                <div class="stat-card">
                    <h3>Teams</h3>
                    <div id="team-list" class="mt-3">
                        <!-- Wird dynamisch gefüllt -->
                    </div>
                    <button class="btn btn-primary mt-3" onclick="showTeamModal()">Neues Team</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Department Modal -->
    <div id="department-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Neue Abteilung</h3>
                <button class="modal-close" onclick="hideDepartmentModal()">&times;</button>
            </div>
            <form id="department-form">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" name="name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Beschreibung</label>
                    <textarea name="description" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Abteilung erstellen</button>
            </form>
        </div>
    </div>

    <!-- Team Modal -->
    <div id="team-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Neues Team</h3>
                <button class="modal-close" onclick="hideTeamModal()">&times;</button>
            </div>
            <form id="team-form">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" name="name" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Beschreibung</label>
                    <textarea name="description" class="form-control" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Abteilung</label>
                    <select name="department_id" class="form-control">
                        <option value="">Keine Abteilung</option>
                        <!-- Wird dynamisch gefüllt -->
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Team erstellen</button>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="/js/admin-dashboard.js"></script>
    <script>
        // Dashboard neu laden bei Klick auf Logo
        document.querySelector('.logo-container').addEventListener('click', (e) => {
            e.preventDefault();
            window.location.reload();
        });

        // Modal functions
        function showDepartmentModal() {
            document.getElementById('department-modal').style.display = 'flex';
        }

        function hideDepartmentModal() {
            document.getElementById('department-modal').style.display = 'none';
        }

        function showTeamModal() {
            document.getElementById('team-modal').style.display = 'flex';
        }

        function hideTeamModal() {
            document.getElementById('team-modal').style.display = 'none';
        }

        // Modal schließen bei Klick außerhalb
        window.onclick = function(event) {
            const modals = ['department-modal', 'team-modal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            });
        }
    </script>

    <style>
        /* Modal Styles */
        .modal {
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: var(--background-light);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-secondary);
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            background-color: var(--background-dark);
            color: var(--error-color);
        }

        .table-responsive {
            overflow-x: auto;
            margin-top: var(--spacing-md);
        }

        .btn-group {
            display: flex;
            gap: var(--spacing-sm);
        }

        .department-list,
        .team-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
        }

        .department-item,
        .team-item {
            padding: var(--spacing-sm);
            background-color: var(--background-dark);
            border-radius: var(--radius-sm);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</body>
</html>